# 每日心情 - 跨平台日记应用

一款简单易用的跨平台日记应用，帮助您记录每一天的心情与点滴。

## 功能特点

- **多种视图**：日历视图、列表视图和收藏视图，方便不同场景下的使用
- **格式支持**：支持纯文本和Markdown格式
- **多媒体附件**：支持添加照片到日记
- **情感记录**：使用心情指数记录您的情绪变化
- **标签系统**：通过标签分类和组织您的日记
- **云同步**：支持WebDAV同步，可与Nextcloud、Seafile等服务兼容
- **跨平台**：支持Android、Windows和iOS

## 安装方法

### Windows

1. 下载最新的release中的`.zip`文件
2. 解压到您想要的位置
3. 运行`diary_app.exe`

### Android

1. 下载最新的release中的`.apk`文件
2. 在您的Android设备上安装此APK
3. 您可能需要允许安装来自未知来源的应用

## 使用WebDAV同步

1. 在设置中找到"WebDAV同步设置"
2. 输入您的WebDAV服务器地址（必须以http://或https://开头，以/结尾）
3. 输入用户名和密码
4. 点击"测试连接"确认连接成功
5. 选择同步选项：启动时同步和/或更改后同步
6. 点击"保存配置"

## 隐私与安全

- 所有数据存储在您的设备本地
- 同步数据只发送到您配置的WebDAV服务器
- 没有第三方服务器收集您的日记数据

## 版本历史

查看[更新日志](CHANGELOG.md)获取详细的版本更新信息。

## 反馈与建议

如有任何问题或建议，请提交Issue或联系开发团队。

## 技术栈

- **Flutter**: 用于构建跨平台UI
- **Provider**: 状态管理
- **SQLite**: 本地数据存储
- **Flutter Quill**: 富文本编辑功能
- **Flutter Markdown**: Markdown渲染
- **Path Provider**: 文件路径管理
- **Table Calendar**: 日历组件
- **Image Picker**: 图片选择功能
- **WebDAV Client**: WebDAV同步支持

## 项目结构

```
lib/
├── main.dart                  # 应用入口点
├── models/                    # 数据模型
│   └── diary_entry.dart       # 日记条目模型
├── services/                  # 服务层
│   ├── diary_database.dart    # 数据库服务
│   ├── diary_provider.dart    # 状态管理提供者
│   ├── media_service.dart     # 媒体服务
│   └── webdav_service.dart    # WebDAV同步服务
├── ui/                        # 用户界面
│   ├── screens/               # 屏幕/页面
│   │   ├── diary_edit_screen.dart   # 日记编辑页面
│   │   ├── home_screen.dart         # 主页面
│   │   ├── search_screen.dart       # 搜索页面
│   │   ├── splash_screen.dart       # 启动页面
│   │   └── webdav_config_screen.dart # WebDAV配置页面
│   ├── themes/                # 主题设置
│   │   └── app_theme.dart     # 应用主题
│   └── widgets/               # 可复用组件
│       ├── diary_list_item.dart     # 日记列表项
│       └── image_attachment.dart    # 图片附件组件
└── utils/                     # 工具类和辅助函数
```

## 开发计划

### 已完成 ✅

- 基础应用框架搭建
- 数据库结构设计和实现
- 本地数据存储功能
- 基本UI界面设计
- 日历和列表视图切换
- Windows平台支持
- 富文本编辑器集成 - 使用Flutter Quill实现，支持样式和格式化
- 图片附件功能 - 基础实现已完成，列表视图中的图片显示已优化
- WebDAV同步功能 - 支持日记和图片同步到WebDAV服务器
- Markdown支持 - 添加Markdown格式的日记编辑和预览

### 部分完成 🔄

- 日记标签系统 <*基础结构已完成，需添加标签管理界面*>
- 主题切换功能 <*主题已定义，需完善切换机制*>
- 收藏功能 <*数据模型已支持，UI交互需改进*>
- 搜索功能 <*已添加关键词、标签和心情搜索，需增加高级搜索选项*>

### 待完成 📋

- 应用密码保护
- 通知和提醒功能：定时提醒用户记录日记
- 数据可视化：情绪分析和统计图表
- iOS和Android平台适配优化
- 用户引导和教程
- 多语言支持
- 导出功能：支持导出为PDF/TXT格式

## WebDAV同步功能使用指南

1. 在设置中找到"WebDAV同步设置"
2. 输入您的WebDAV服务器地址、用户名和密码
3. 点击"测试连接"确认连接是否成功
4. 启用同步功能后，日记和图片将自动同步到服务器

支持的WebDAV服务包括：
- Nextcloud/ownCloud
- 坚果云
- Box.com
- 任何支持WebDAV协议的服务器

## Markdown支持说明

应用支持使用Markdown格式编写日记，提供以下功能：
- 实时预览
- 支持所有标准Markdown语法
- 支持标题、列表、粗体、斜体等格式
- 在创建或编辑日记时可以选择内容格式

## 已知问题

- 在某些设备上可能存在UI布局适配问题
- 日历视图中日期选择后状态更新不及时
- 标签功能数据结构已定义但UI未完全实现
- 深色模式切换可能导致某些组件显示异常
- 富文本编辑器暂时使用普通文本编辑器替代，需要适配最新的Flutter Quill API
- WebDAV同步在网络不稳定情况下可能需要多次尝试

## 下一步开发重点

1. 完善搜索功能，添加日期范围搜索和更多高级筛选选项
2. 完善标签系统UI和交互，添加标签管理界面
3. 修复富文本编辑器问题，适配最新的Flutter Quill API
4. 实现数据可视化功能，提供情绪分析和统计
5. 添加应用密码保护功能，提高数据安全性
6. 增强WebDAV同步功能，支持增量同步和冲突解决

## 贡献指南

欢迎贡献代码或提出建议！请fork本仓库并提交拉取请求。

## 许可证

[待定] - 本项目采用的开源许可证类型
